          name: Build and Deploy

          on:
            push:
              branches:
                - main

          jobs:
            build:
              runs-on: ubuntu-latest

              steps:
                - name: Checkout code
                  uses: actions/checkout@v3

                - name: Set up Node.js
                  uses: actions/setup-node@v3
                  with:
                    node-version: '18'

                - name: Install dependencies
                  run: npm ci

                - name: Build frontend
                  run: npm run build --prefix client

                - name: Copy .nojekyll file
                  run: cp public/.nojekyll dist/

                - name: Upload artifact
                  uses: actions/upload-artifact@v3
                  with:
                    name: build-output
                    path: dist